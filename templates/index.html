<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Bulma CSS CDN (remove if you bundle Bulma yourself in /static/styles.css) -->
  <link href="/static/styles.css" rel="stylesheet">
  <!-- Optional: your own custom overrides -->
  <link href="{{ url_for('static', filename='styles.css') }}" rel="stylesheet">
  <title>Detektonist</title>
</head>
<body>
  <!-- Hero section -->
  <section class="hero is-info is-fullheight">
    <!-- Hero head (optional) -->
<!--    <div class="hero-head">-->
<!--      <nav class="navbar is-info" role="navigation" aria-label="main navigation">-->
<!--        <div class="navbar-brand">-->
<!--          <h1 class="navbar-item" href="#">-->
<!--            <strong>Detektonist</strong>-->
<!--          </h1>-->
<!--        </div>-->
<!--      </nav>-->
<!--    </div>-->

    <!-- Hero body -->
    <div class="hero-body">
      <div class="container">
        <div class="columns is-centered">
          <div class="column is-6">
            <!-- Card to hold the classification form -->
            <div class="card">
              <header class="card-header">
                <p class="card-header-title">
                  Classify Object Spectrogram
                </p>
              </header>

              <!-- Display the current image -->
              <div class="card-image" style="text-align: center; padding: 1rem;">
                <figure class="image is-256x256" style="margin: 0 auto;">
                  <!-- Use a smaller figure if your image is large; adjust as needed -->
                  <img
                    src="{{ url_for('serve_file', filename='/' ~ filename) }}"
                    alt="File to classify"
                    style="max-height: 256px; object-fit: contain;"
                  >
                </figure>
              </div>

              <!-- Add an audio player for the user to listen to the WAV file -->
              <div class="card-content">
                <p><strong>Audio Preview:</strong></p>
                <audio controls>
                  <source src="{{ url_for('serve_file', filename=audiofile) }}" type="audio/wav">
                  Your browser does not support the audio element.
                </audio>
              </div>

              <div class="card-content">
                <!-- Classification Form -->
                <form action="{{ url_for('do_classify') }}" method="POST">
                  <!-- Keep track of which file we are classifying -->
                  <input type="hidden" name="filename" value="{{ filename }}">

                  <div class="field is-grouped">
                    <!-- GOOD radio -->
                    <div class="control">
                      <label class="radio-toggle">
                        <input type="radio" name="status" value="accept">
                        <span class="radio-button accept">Accept</span>
                      </label>
                    </div>

                    <!-- BAD radio -->
                    <div class="control">
                      <label class="radio-toggle">
                        <input type="radio" name="status" value="reject">
                        <span class="radio-button reject">Reject</span>
                      </label>
                    </div>
                  </div>

                  <div class="field is-grouped is-grouped-multiline">
                    {% for tag in tags %}
                      <div class="control">
                        <label class="checkbox tag-toggle">
                          <input type="checkbox" name="tags" value="{{ tag }}">
                          <span class="tag-button">{{ tag }}</span>
                        </label>
                      </div>
                    {% endfor %}
                  </div>

                  <!-- Submit Button -->
                  <div class="field">
                    <div class="control">
                      <button class="button is-primary is-fullwidth" type="submit">
                        Classify
                      </button>
                    </div>
                  </div>
                </form>
              </div> <!-- end card-content -->
            </div> <!-- end card -->
          </div> <!-- end column -->
        </div> <!-- end columns -->
      </div> <!-- end container -->
    </div> <!-- end hero-body -->

    <!-- Hero foot (optional) -->
    <div class="hero-foot">
      <nav class="tabs is-fullwidth is-info">
        <div class="container">
          <ul>
            <li><a href="#">Home</a></li>
            <li><a href="#">History</a></li>
            <li><a href="#">Settings</a></li>
          </ul>
        </div>
      </nav>
    </div>
  </section>
</body>
</html>